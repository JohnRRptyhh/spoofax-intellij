<idea-plugin version="2">
    <id>org.metaborg.spoofax.intellij.idea</id>
    <name>Spoofax</name>
    <version>0.2.0-alpha</version>
    <vendor email="info@metaborg.org" url="http://www.metaborg.org/">Metaborg</vendor>

    <description><![CDATA[
      Spoofax plugin for IntelliJ IDEA.
    ]]></description>

    <change-notes><![CDATA[
      Bug fixes and improvements.
    ]]>
    </change-notes>

    <!-- please see https://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description -->
    <idea-version since-build="131"/>

    <!--<depends>org.jetbrains.idea.maven</depends>-->

    <!-- please see https://confluence.jetbrains.com/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
         on how to target different products -->
    <!-- uncomment to enable plugin in all products
    <depends>com.intellij.modules.lang</depends>
    -->

    <extensions defaultExtensionNs="com.intellij">
        <fileTypeFactory implementation="org.metaborg.spoofax.idea.vfs.SpoofaxFileTypeFactory"/>
        <!--<fileTypeFactory implementation="org.metaborg.spoofax.intellij.languages.SpoofaxFileTypeFactory"/>-->
        <moduleType id="SPOOFAX_MODULE"
                    implementationClass="org.metaborg.spoofax.intellij.idea.project.SpoofaxModuleType"/>
        <!--<compiler.buildTargetScopeProvider
                implementation="org.metaborg.spoofax.intellij.idea.SpoofaxBuildTargetScopeProvider"/>-->
        <moduleConfigurationEditorProvider
                implementation="org.metaborg.spoofax.intellij.idea.project.SpoofaxModuleConfigurationEditorProvider"/>
        <projectStructureDetector implementation="org.metaborg.spoofax.intellij.idea.project.SpoofaxProjectDetector"/>
        <sdkType implementation="org.metaborg.spoofax.intellij.sdk.SpoofaxSdkType"/>
        <compileServer.plugin
                classpath="../classes/jpslib/slf4j-api-1.7.12.jar;../classes/jpslib/slf4j-simple-1.7.12;aether-api-1.0.0.v20140518.jar;aether-impl-1.0.0.v20140518.jar;aether-spi-1.0.0.v20140518.jar;aether-util-1.0.0.v20140518.jar;annotations.jar;ant-1.5.jar;ant-1.9.6.jar;ant-contrib-1.0b3.jar;ant-launcher-1.9.6.jar;aopalliance-1.0.jar;asm-3.1.jar;asm-4.2.jar;asm-all.jar;asm-commons.jar;asm.jar;asm4-all.jar;automaton.jar;boot.jar;bootstrap.jar;cdi-api-1.0.jar;cglib-2.2.1-v20090111.jar;cglib-2.2.2.jar;cli-parser-1.1.jar;commons-codec-1.9.jar;commons-httpclient-3.1-patched.jar;commons-io-2.4.jar;commons-lang3-3.3.2.jar;commons-logging-1.1.1.jar;commons-logging-1.2.jar;commons-net-3.3.jar;commons-vfs2-2.0.jar;compiler-0.8.17.jar;coverage-agent.jar;coverage-instrumenter.jar;coverage-util.jar;ecj-4.4.jar;extensions.jar;fluent-hc-4.4.1.jar;forms_rt.jar;functionaljava-4.1.jar;groovy-all-2.3.9.jar;gson-2.3.1.jar;guava-17.0.jar;guava-18.0.jar;guice-3.0.jar;guice-assistedinject-3.0.jar;guice-multibindings-3.0.jar;hamcrest-core-1.3.jar;hamcrest-core-1.3.jar;hppc-0.7.1.jar;httpclient-4.4.1.jar;httpcore-4.4.1.jar;httpmime-4.4.1.jar;icons.jar;idea.jar;idea_rt.jar;imgscalr-lib-4.2.jar;isorelax.jar;jackson-annotations-2.6.0.jar;jackson-core-2.6.0.jar;jackson-databind-2.6.0.jar;jackson-dataformat-yaml-2.6.0.jar;javac2.jar;javassist-3.20.0-GA.jar;javax.inject-1.jar;jaxen-1.1.3.jar;jayatana-1.2.4.jar;jcip-annotations.jar;jdkAnnotations.jar;jdom.jar;jgoodies-common-1.2.1.jar;jgoodies-forms.jar;jgoodies-looks-2.4.2.jar;jgrapht-core-0.9.3.jar;jh.jar;jing.jar;jna-platform.jar;jna.jar;jps-builders.jar;jps-launcher.jar;jps-model.jar;jsch-0.1.52.jar;jsch.agentproxy.connector-factory.jar;jsch.agentproxy.core.jar;jsch.agentproxy.pageant.jar;jsch.agentproxy.sshagent.jar;jsch.agentproxy.usocket-jna.jar;jsch.agentproxy.usocket-nc.jar;jsr166e.jar;jsr173_1.0_api.jar;jsr250-api-1.0.jar;jsr305-3.0.0.jar;junit-4.11.jar;junit-4.12.jar;junit.jar;jzlib-1.1.1.jar;kotlin-reflect.jar;kotlin-runtime.jar;kryo-3.0.0.jar;log4j.jar;make-permissive-1.5.0-SNAPSHOT.jar;markdown4j-2.2.jar;markdownj-core-0.4.2-SNAPSHOT.jar;maven-aether-provider-3.2.5.jar;maven-artifact-3.2.5.jar;maven-core-3.2.5.jar;maven-model-3.2.5.jar;maven-model-builder-3.2.5.jar;maven-plugin-api-3.2.5.jar;maven-repository-metadata-3.2.5.jar;maven-scm-api-1.4.jar;maven-scm-provider-svn-commons-1.4.jar;maven-scm-provider-svnexe-1.4.jar;maven-settings-3.2.5.jar;maven-settings-builder-3.2.5.jar;microba.jar;miglayout-swing.jar;minlog-1.3.0.jar;nanoxml-2.2.3.jar;nekohtml-1.9.14.jar;netty-all-4.1.0.Beta6.jar;objenesis-2.1.jar;openapi.jar;optimizedFileManager.jar;org.eclipse.sisu.inject-0.3.0.M1.jar;org.eclipse.sisu.plexus-0.3.0.M1.jar;org.metaborg.core-1.5.0-SNAPSHOT.jar;org.metaborg.runtime.task-1.5.0-SNAPSHOT.jar;org.metaborg.settings-1.5.0-SNAPSHOT.jar;org.metaborg.settings.jackson-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.core-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.generator-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.meta.core-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.nativebundle-1.5.0-SNAPSHOT.jar;org.metaborg.util-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.core-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.index-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.java-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.jsglr-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.xml-1.5.0-SNAPSHOT.jar;org.spoofax.jsglr-1.5.0-SNAPSHOT.jar;org.spoofax.terms-1.5.0-SNAPSHOT.jar;org.strategoxt.strj-1.5.0-SNAPSHOT.jar;oromatcher.jar;picocontainer.jar;plexus-cipher-1.4.jar;plexus-classworlds-2.5.2.jar;plexus-component-annotations-1.5.5.jar;plexus-interpolation-1.21.jar;plexus-sec-dispatcher-1.3.jar;plexus-utils-3.0.20.jar;protobuf-2.5.0.jar;proxy-vole_20131209.jar;pty4j-0.5.jar;purejavacomm.jar;reflectasm-1.10.0.jar;regexp-1.3.jar;resolver.jar;resources.jar;resources_en.jar;rhino-js-1_7R4.jar;rngom-20051226-patched.jar;rxjava-core-0.19.6.jar;sanselan-0.98-snapshot.jar;serviceMessages.jar;sisu-guice-3.2.3-no_aop.jar;snakeyaml-1.15.jar;snappy-in-java-0.3.1.jar;strategoxt-min-jar-1.5.0-SNAPSHOT.jar;swingx-core-1.6.2.jar;tools.jar;trang-core.jar;trove4j.jar;util.jar;velocity.jar;winp-1.23.jar;xbean.jar;xercesImpl.jar;xml-apis.jar;xmlrpc-2.0.jar;xpp3-1.1.4-min.jar;xstream-1.4.3.jar"/>

        <!--<compileServer.plugin
                classpath="make-permissive-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.intellij.jar;../classes/jpslib/slf4j-api-1.7.12.jar;../classes/jpslib/slf4j-simple-1.7.12;org.jetbrains.intellij-ce-14.1.4.tar.gz;org.metaborg.core-1.5.0-SNAPSHOT.jar;org.metaborg.util-1.5.0-SNAPSHOT.jar;junit-4.11.jar;hamcrest-core-1.3.jar;commons-io-2.4.jar;commons-vfs2-2.0.jar;commons-logging-1.1.1.jar;rxjava-core-0.19.6.jar;guice-multibindings-3.0.jar;guava-18.0.jar;jsr305-3.0.0.jar;kryo-3.0.0.jar;reflectasm-1.10.0.jar;asm-4.2.jar;minlog-1.3.0.jar;objenesis-2.1.jar;jgrapht-core-0.9.3.jar;hppc-0.7.1.jar;jackson-core-2.6.0.jar;jackson-databind-2.6.0.jar;jackson-annotations-2.6.0.jar;jackson-dataformat-yaml-2.6.0.jar;snakeyaml-1.15.jar;org.metaborg.spoofax.core-1.5.0-SNAPSHOT.jar;org.spoofax.terms-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.core-1.5.0-SNAPSHOT.jar;org.spoofax.jsglr-1.5.0-SNAPSHOT.jar;org.strategoxt.strj-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.xml-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.java-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.jsglr-1.5.0-SNAPSHOT.jar;strategoxt-min-jar-1.5.0-SNAPSHOT.jar;org.spoofax.interpreter.library.index-1.5.0-SNAPSHOT.jar;org.metaborg.runtime.task-1.5.0-SNAPSHOT.jar;functionaljava-4.1.jar;maven-core-3.2.5.jar;maven-model-3.2.5.jar;maven-settings-3.2.5.jar;maven-settings-builder-3.2.5.jar;maven-repository-metadata-3.2.5.jar;maven-artifact-3.2.5.jar;maven-plugin-api-3.2.5.jar;maven-model-builder-3.2.5.jar;maven-aether-provider-3.2.5.jar;aether-spi-1.0.0.v20140518.jar;aether-impl-1.0.0.v20140518.jar;aether-api-1.0.0.v20140518.jar;aether-util-1.0.0.v20140518.jar;org.eclipse.sisu.plexus-0.3.0.M1.jar;cdi-api-1.0.jar;jsr250-api-1.0.jar;org.eclipse.sisu.inject-0.3.0.M1.jar;sisu-guice-3.2.3-no_aop.jar;plexus-interpolation-1.21.jar;plexus-utils-3.0.20.jar;plexus-classworlds-2.5.2.jar;plexus-component-annotations-1.5.5.jar;plexus-sec-dispatcher-1.3.jar;plexus-cipher-1.4.jar;org.metaborg.spoofax.generator-1.5.0-SNAPSHOT.jar;compiler-0.8.17.jar;commons-lang3-3.3.2.jar;org.metaborg.spoofax.meta.core-1.5.0-SNAPSHOT.jar;org.metaborg.spoofax.nativebundle-1.5.0-SNAPSHOT.jar;ant-contrib-1.0b3.jar;guice-3.0.jar;javax.inject-1.jar;aopalliance-1.0.jar;ant-1.9.6.jar;ant-launcher-1.9.6.jar"/>-->
        <!--<lang.syntaxHighlighterFactory key="Spoofax" implementationClass="org.metaborg.spoofax.intellij.idea.languages.SpoofaxSyntaxHighlighterFactory"/>-->
        <applicationService serviceImplementation="org.metaborg.spoofax.intellij.serialization.SpoofaxGlobalService"/>
        <projectService serviceImplementation="org.metaborg.spoofax.intellij.serialization.SpoofaxProjectService"/>
        <lang.elementManipulator forClass="org.metaborg.spoofax.intellij.idea.psi.SpoofaxIdentifier"
                                 implementationClass="org.metaborg.spoofax.intellij.idea.psi.SpoofaxIdentifierManipulator"/>
        <psi.referenceContributor implementation="org.metaborg.idea.psi.MetaborgReferenceContributor"/>
        <projectConfigurable id="metaborg.project.language.settings" groupId="language" instance="org.metaborg.idea.gui.MetaborgProjectLanguagesConfigurable" />
    </extensions>

    <application-components>
        <!-- Add your application components here -->
        <component>
            <implementation-class>org.metaborg.spoofax.intellij.idea.IdeaPlugin</implementation-class>
        </component>
    </application-components>

    <project-components>
        <!-- Add your project components here -->
        <component>
            <implementation-class>org.metaborg.spoofax.intellij.SpoofaxProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <!-- Add your actions here -->
        <group id="Spoofax.TestMenu" text="Spoofax" description="Spoofax test menu">
            <add-to-group group-id="MainMenu" anchor="last"/>
            <action id="Spoofax.LoadLanguages" class="org.metaborg.spoofax.intellij.LoadLanguagesAction"
                    text="Load languages" description="Loads languages."/>
            <action id="Spoofax.UnloadLanguages" class="org.metaborg.spoofax.intellij.UnloadLanguagesAction"
                    text="Unload languages" description="Unloads languages."/>
        </group>
        <group id="Spoofax.AddLanguagePopup" popup="true">
            <action id="Spoofax.AddLanguageFromDirectory" class="org.metaborg.idea.gui2.AddLanguageFromDirectoryAction"
                    text="Directory..." description="Add a language by specifying its directory."/>
            <action id="Spoofax.AddLanguageFromArtifact" class="org.metaborg.idea.gui2.AddLanguageFromArtifactAction"
                    text="Artifact..." description="Add a language by specifying its artifact."/>
        </group>
    </actions>

    <module-components>
        <component>
            <implementation-class>org.metaborg.spoofax.intellij.idea.project.SpoofaxModuleComponent</implementation-class>
        </component>
    </module-components>
</idea-plugin>